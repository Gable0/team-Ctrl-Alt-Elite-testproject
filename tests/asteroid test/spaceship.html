<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Spaceship Movement Test</title>
    <style>
        body {
            margin: 0;
            background: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
        canvas {
            background: #000;
            border: 1px solid #fff;
        }
    </style>
</head>
<body>
<canvas id="game" width="600" height="400"></canvas>
<script>
    const canvas = document.getElementById('game');
    const ctx = canvas.getContext('2d');

    // Spaceship class
    class Ship {
        constructor(x, y) {
            this.x = x;
            this.y = y;
            this.vx = 0;
            this.vy = 0;
            this.angle = 0; // radians, facing right
            this.thrust = 0.2; // accel per frame
            this.friction = 0.99; // slow drift
            this.rotSpeed = 0.1; // rad per frame
            this.size = 10;
        }

        update(keys) {
            // Rotation
            if (keys.ArrowLeft || keys.KeyA) this.angle -= this.rotSpeed;
            if (keys.ArrowRight || keys.KeyD) this.angle += this.rotSpeed;

            // Thrust
            if (keys.ArrowUp || keys.KeyW) {
                this.vx += Math.cos(this.angle) * this.thrust;
                this.vy += Math.sin(this.angle) * this.thrust;
            }

            // Apply friction
            this.vx *= this.friction;
            this.vy *= this.friction;

            // Move
            this.x += this.vx;
            this.y += this.vy;

            // Wraparound
            if (this.x > canvas.width + this.size) this.x = -this.size;
            if (this.x < -this.size) this.x = canvas.width + this.size;
            if (this.y > canvas.height + this.size) this.y = -this.size;
            if (this.y < -this.size) this.y = canvas.height + this.size;
        }

        draw() {
            ctx.save();
            ctx.translate(this.x, this.y);
            ctx.rotate(this.angle);
            ctx.strokeStyle = '#fff';
            ctx.lineWidth = 2;
            ctx.beginPath();
            // Triangle ship: nose, left wing, right wing
            ctx.moveTo(this.size, 0);
            ctx.lineTo(-this.size * 0.8, this.size * 0.8);
            ctx.lineTo(-this.size * 0.8, -this.size * 0.8);
            ctx.closePath();
            ctx.stroke();

            // Thrust flame (if acceleratingâ€”stub for now)
            ctx.restore();
        }

        hyperspace() {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.vx = 0;
            this.vy = 0;
        }
    }

    const ship = new Ship(canvas.width / 2, canvas.height / 2);
    const keys = {};

    window.addEventListener('keydown', e => keys[e.code] = true);
    window.addEventListener('keyup', e => keys[e.code] = false);

    function animate() {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        ship.update(keys);
        if (keys.Space) {
            ship.hyperspace();
            keys.Space = false; // one-shot
        }
        ship.draw();
        requestAnimationFrame(animate);
    }

    animate();
</script>
</body>
</html>