<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ui/pauseMenu.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ui/pauseMenu.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// js/ui/pauseMenu.js
// Handles creation and toggling of the in-game pause menu.

import { translate, applyTranslations } from './translations.js';
let isPaused = false;
let pauseMenuElement = null;
let pauseIconElement = null;

/**
 * Initializes the pause menu UI and sets up global ESC-key handling.
 * Creates the menu DOM element once and attaches button listeners.
 *
 * @param {Object} game - The main game state object (must have `gameOver` and `paused` properties).
 */
export function initPauseMenu(game) {
  // Create the pause icon button
  if (!pauseIconElement) {
    pauseIconElement = document.createElement('button');
    pauseIconElement.id = 'pauseIcon';
    pauseIconElement.className = 'pause-icon';
    pauseIconElement.innerHTML = '⏸️'; // Pause emoji
    pauseIconElement.setAttribute('aria-label', 'Pause Game');
    document.body.appendChild(pauseIconElement);

    // Click handler for pause icon
    pauseIconElement.addEventListener('click', e => {
      e.stopPropagation();
      if (!game.gameOver) {
        togglePause(game);
      }
    });
  }

  // Create the pause menu only once
  if (!pauseMenuElement) {
    pauseMenuElement = document.createElement('div');
    pauseMenuElement.id = 'pauseMenu';
    pauseMenuElement.className = 'pause-menu hidden';
    pauseMenuElement.innerHTML = `
      &lt;link rel="preload" href="https://fonts.googleapis.com/css2?family=Jersey+10&amp;display=swap" as="style" onload="this.onload=null;this.rel='stylesheet'">
      &lt;noscript>&lt;link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Jersey+10&amp;display=swap">&lt;/noscript>
      &lt;div class="pause-menu-content">
        &lt;h2 translate="paused">PAUSED&lt;/h2>
        &lt;button id="resumeButton"   class="pause-menu-button" translate="resume">Resume&lt;/button>
        &lt;button id="settingsButton" class="pause-menu-button pause-menu-settings" translate="settings">Settings&lt;/button>
        &lt;button id="restartButton"  class="pause-menu-button" translate="restart">Restart&lt;/button>
        &lt;button id="exitButton"     class="pause-menu-button" translate="exitToMenu">Exit to Menu&lt;/button>
      &lt;/div>
    `;
    document.body.appendChild(pauseMenuElement);

    applyTranslations(pauseMenuElement);

    // Button actions
    document.getElementById('resumeButton').addEventListener('click', () => {
      togglePause(game);
    });

    document.getElementById('settingsButton').addEventListener('click', () => {
      // Open settings - trigger settings button click
      const settingsBtn = document.querySelector('.settings-btn');
      if (settingsBtn) {
        settingsBtn.click();
      }
    });

    document.getElementById('restartButton').addEventListener('click', () => {
      window.location.href = 'game.html';
    });

    document.getElementById('exitButton').addEventListener('click', () => {
      const confirmed = window.confirm(translate('confirmExit'));
      if (confirmed) {
        // FIXED: Navigate back to index.html (which has the persistent audio)
        // The intro audio in index.html will continue playing
        sessionStorage.removeItem('stopIntroAudio');

        // Navigate to the main index which will load homepage
        window.location.href = 'index.html';
      }
    });

    window.addEventListener('languagechange', () => {
      applyTranslations(pauseMenuElement);
    });
  }

  // Global ESC key listener (only works when the game isn't over)
  window.addEventListener('keydown', e => {
    if (e.code === 'Escape' &amp;&amp; !game.gameOver) {
      e.preventDefault();
      togglePause(game);
    }
  });
}

/**
 * Toggles the pause state and shows/hides the pause menu overlay.
 *
 * @param {Object} game - The main game state (its `paused` property will be updated).
 */
export function togglePause(game) {
  isPaused = !isPaused;
  game.paused = isPaused;

  if (isPaused) {
    pauseMenuElement.classList.remove('hidden');
    pauseMenuElement.classList.add('active');
    if (pauseIconElement) {
      pauseIconElement.style.display = 'none'; // Hide icon when paused
    }
  } else {
    pauseMenuElement.classList.remove('active');
    pauseMenuElement.classList.add('hidden');
    if (pauseIconElement) {
      pauseIconElement.style.display = 'block'; // Show icon when resumed
    }
  }
}

/**
 * Returns the current pause state.
 *
 * @returns {boolean} `true` if the game is paused, `false` otherwise.
 */
export function isGamePaused() {
  return isPaused;
}
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="PersistentAudioManager.html">PersistentAudioManager</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Game">Game</a></li><li><a href="global.html#advanceEnemyAlongPath">advanceEnemyAlongPath</a></li><li><a href="global.html#audioManager">audioManager</a></li><li><a href="global.html#barrierY">barrierY</a></li><li><a href="global.html#boxesOverlap">boxesOverlap</a></li><li><a href="global.html#canvas">canvas</a></li><li><a href="global.html#canvasRef">canvasRef</a></li><li><a href="global.html#checkEnemyShotCollisions">checkEnemyShotCollisions</a></li><li><a href="global.html#checkPlayerEnemyCollision">checkPlayerEnemyCollision</a></li><li><a href="global.html#checkPlayerShotCollisions">checkPlayerShotCollisions</a></li><li><a href="global.html#createEnemy">createEnemy</a></li><li><a href="global.html#createInitialGame">createInitialGame</a></li><li><a href="global.html#createPlayer">createPlayer</a></li><li><a href="global.html#createPlayerShot">createPlayerShot</a></li><li><a href="global.html#ctx">ctx</a></li><li><a href="global.html#ctxRef">ctxRef</a></li><li><a href="global.html#draw">draw</a></li><li><a href="global.html#drawBackground">drawBackground</a></li><li><a href="global.html#drawEnemies">drawEnemies</a></li><li><a href="global.html#drawEnemyShots">drawEnemyShots</a></li><li><a href="global.html#drawPlayer">drawPlayer</a></li><li><a href="global.html#drawPlayerShots">drawPlayerShots</a></li><li><a href="global.html#enemyTypes">enemyTypes</a></li><li><a href="global.html#equipSkin">equipSkin</a></li><li><a href="global.html#fireEnemyShot">fireEnemyShot</a></li><li><a href="global.html#formationConfig">formationConfig</a></li><li><a href="global.html#generateAttackPath">generateAttackPath</a></li><li><a href="global.html#generateEntryPath">generateEntryPath</a></li><li><a href="global.html#getActiveSkin">getActiveSkin</a></li><li><a href="global.html#getEnemyHitbox">getEnemyHitbox</a></li><li><a href="global.html#getEnemyShotHitbox">getEnemyShotHitbox</a></li><li><a href="global.html#getEnemySkinImage">getEnemySkinImage</a></li><li><a href="global.html#getOwnedSkins">getOwnedSkins</a></li><li><a href="global.html#getPlayerHitbox">getPlayerHitbox</a></li><li><a href="global.html#getShotHitbox">getShotHitbox</a></li><li><a href="global.html#handleEnemyKilled">handleEnemyKilled</a></li><li><a href="global.html#handleLevelProgression">handleLevelProgression</a></li><li><a href="global.html#handlePlayerHit">handlePlayerHit</a></li><li><a href="global.html#initAudio">initAudio</a></li><li><a href="global.html#initBackground">initBackground</a></li><li><a href="global.html#initEnemyAttack">initEnemyAttack</a></li><li><a href="global.html#initEnemyModule">initEnemyModule</a></li><li><a href="global.html#initInput">initInput</a></li><li><a href="global.html#initPauseMenu">initPauseMenu</a></li><li><a href="global.html#initSharedAudio">initSharedAudio</a></li><li><a href="global.html#initShooting">initShooting</a></li><li><a href="global.html#initialized">initialized</a></li><li><a href="global.html#isGamePaused">isGamePaused</a></li><li><a href="global.html#isKeyPressed">isKeyPressed</a></li><li><a href="global.html#isSkinOwned">isSkinOwned</a></li><li><a href="global.html#killEnemy">killEnemy</a></li><li><a href="global.html#loadEnemySkinImage">loadEnemySkinImage</a></li><li><a href="global.html#loop">loop</a></li><li><a href="global.html#moveEnemyInFormation">moveEnemyInFormation</a></li><li><a href="global.html#playBackgroundGameMusic">playBackgroundGameMusic</a></li><li><a href="global.html#playIntroMusic">playIntroMusic</a></li><li><a href="global.html#pressedKeys">pressedKeys</a></li><li><a href="global.html#scheduleEnemyAttacks">scheduleEnemyAttacks</a></li><li><a href="global.html#selectAttackingEnemy">selectAttackingEnemy</a></li><li><a href="global.html#spawnEnemyWave">spawnEnemyWave</a></li><li><a href="global.html#stars">stars</a></li><li><a href="global.html#start">start</a></li><li><a href="global.html#startEnemyAttack">startEnemyAttack</a></li><li><a href="global.html#startNextLevel">startNextLevel</a></li><li><a href="global.html#togglePause">togglePause</a></li><li><a href="global.html#update">update</a></li><li><a href="global.html#updateAttackingEnemy">updateAttackingEnemy</a></li><li><a href="global.html#updateBackground">updateBackground</a></li><li><a href="global.html#updateEnemies">updateEnemies</a></li><li><a href="global.html#updateEnemyShots">updateEnemyShots</a></li><li><a href="global.html#updateInvincibility">updateInvincibility</a></li><li><a href="global.html#updateLevelTransition">updateLevelTransition</a></li><li><a href="global.html#updatePlayer">updatePlayer</a></li><li><a href="global.html#updatePlayerShots">updatePlayerShots</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.5</a> on Wed Dec 10 2025 10:27:16 GMT-0800 (Pacific Standard Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
